<!DOCTYPE html>
<html lang="ja">
<head>
  ï¼”

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¤ç‰©ã®åˆ†é¡ã‚ã‘ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ </title>
  <!-- ãƒ•ã‚©ãƒ³ãƒˆä¾‹ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰ -->
  <!-- <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"> -->
  <style>
    /* =============================
       å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ«
       ============================= */
    body {
      touch-action: manipulation; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®ãƒ”ãƒ³ãƒã‚¢ã‚¦ãƒˆå¯¾å¿œ */
      background-color: black;
      color: white;
      font-family: 'Press Start 2P', monospace;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
    #gameContainer {
      width: 90vw;
      max-width: 100vw;
      height: auto;
      background-color: black;
      color: white;
      text-align: center;
      transform-origin: center;
      margin: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    /* ãƒ‰ãƒ©ã‚¯ã‚¨é¢¨æ  */
    .dq-frame {
      border: 3px double white;
      background-color: black;
      color: white;
      padding: 8px;
      margin: 10px auto;
      box-sizing: border-box;
    }
    /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ */
    #messageBox {
      width: 90%;
      height: 60px;
      overflow: hidden;
      margin: 10px auto;
      font-size: 14px;
    }
    /* HPãƒãƒ¼ */
    .hp-bar {
      width: 100%;
      height: 20px;
      border: 1px solid white;
      margin: 5px 0;
      display: flex;
      align-items: center;
    }
    .hp-inner {
      height: 100%;
      background: linear-gradient(to right, red, darkred);
      transition: width 0.3s ease-in-out;
    }
    /* æ¤ç‰©ç”»åƒè¡¨ç¤ºé ˜åŸŸ */
    #plantImageContainer {
      width: 300px;
      height: 300px;
      margin: 10px auto;
      border: 3px double white;
      background-color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    #plantImage {
      max-width: 80%;
      max-height: 80%;
    }
    /* ãƒœã‚¿ãƒ³ï¼ˆãƒ‰ãƒ©ã‚¯ã‚¨é¢¨ï¼‰ */
    .button {
      background-color: black;
      border: 2px solid white;
      color: white;
      padding: 8px 12px;
      margin: 5px;
      cursor: pointer;
      font-family: 'Press Start 2P', monospace;
      font-size: 14px;
    }
    .button:hover {
      background-color: white;
      color: black;
    }
    /* åˆ†é¡é¸æŠãƒœã‚¿ãƒ³ */
    #classificationButtons {
      width: 240px;
      border: 3px double white;
      background-color: black;
      margin: 10px auto;
      padding: 10px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 5px;
      justify-items: center;
    }
    /* ã‚·ã‚§ã‚¤ã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    @keyframes shake {
      0% { transform: translate(0, 0); }
      20% { transform: translate(-10px, 0); }
      40% { transform: translate(10px, 0); }
      60% { transform: translate(-10px, 0); }
      80% { transform: translate(10px, 0); }
      100% { transform: translate(0, 0); }
    }
    .shake {
      animation: shake 0.5s;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
    <div id="startScreen" class="dq-frame">
      <button id="startButton" class="button">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>
    
    <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
    <div id="gameScreen" style="display: none;">
      <!-- æ¤ç‰©HPãƒãƒ¼ -->
      <div id="plantHP" class="hp-bar">
        <div id="plantHPInner" class="hp-inner" style="width: 100%;"></div>
      </div>
      
      <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ -->
      <div id="messageBox" class="dq-frame"></div>
      
      <!-- æ¤ç‰©ç”»åƒ -->
      <div id="plantImageContainer">
        <img id="plantImage" src="" alt="æ¤ç‰©ç”»åƒ">
      </div>
      
      <!-- BGMãƒˆã‚°ãƒ«ï¼šãƒ©ãƒ™ãƒ«ã¨ãƒœã‚¿ãƒ³ -->
      <div>
        <span>BGMã®æœ‰ç„¡: </span>
        <button id="muteButton" class="button">éŸ³ ON</button>
      </div>
      
      <!-- åˆ†é¡é¸æŠãƒœã‚¿ãƒ³ -->
      <div id="classificationButtons">
        <button class="button classification" data-class="ã‚¢ãƒ–ãƒ©ãƒŠç§‘">ã‚¢ãƒ–ãƒ©ãƒŠç§‘</button>
        <button class="button classification" data-class="ã‚¤ãƒç§‘">ã‚¤ãƒç§‘</button>
        <button class="button classification" data-class="ã‚¦ãƒªç§‘">ã‚¦ãƒªç§‘</button>
        <button class="button classification" data-class="ã‚­ã‚¯ç§‘">ã‚­ã‚¯ç§‘</button>
        <button class="button classification" data-class="ãƒãƒ¡ç§‘">ãƒãƒ¡ç§‘</button>
        <button class="button classification" data-class="ãã®ä»–">ãã®ä»–</button>
      </div>
      
      <!-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼HPãƒãƒ¼ -->
      <div id="playerHP" class="hp-bar">
        <div id="playerHPInner" class="hp-inner" style="width: 100%;"></div>
      </div>
      
      <!-- ã‚²ãƒ¼ãƒ çµ‚äº†æ™‚ï¼šãã¡ã¶ãˆãƒœã‚¿ãƒ³ -->
      <div id="endScreen" class="dq-frame" style="display: none;">
        <button id="mouthButton" class="button">â–¶ãã¡ã¶ãˆ</button>
      </div>
    </div>
  </div>
  
  <!-- BGMéŸ³å£°è¦ç´  -->
  <audio id="bgm" src="https://kogkoba.github.io/bunrui/sciencebgm.mp3" loop></audio>
  <audio id="dqWinSound" src="https://kogkoba.github.io/bunruiq4i/DQwin.mp3"></audio><!-- è¿½åŠ  -->
  <audio id="dqDownSound" src="https://kogkoba.github.io/bunruiq4i/DQdown.mp3"></audio><!-- è¿½åŠ  -->

  
  <script>
    /* =============================
       ãƒ”ãƒ³ãƒã‚¢ã‚¦ãƒˆ(ã‚ºãƒ¼ãƒ )åˆ¶å¾¡
       ============================= */
    let zoomTarget = document.getElementById("gameContainer");
    let initialDistance = 0;
    let scale = 1;
    const minScale = 0.5;
    const maxScale = 2.5;
    function getDistance(touches) {
      let dx = touches[0].clientX - touches[1].clientX;
      let dy = touches[0].clientY - touches[1].clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }
    document.addEventListener("touchstart", (event) => {
      if (event.touches.length === 2) {
        initialDistance = getDistance(event.touches);
      }
    });
    document.addEventListener("touchmove", (event) => {
      if (event.touches.length === 2) {
        let newDistance = getDistance(event.touches);
        let zoomFactor = newDistance / initialDistance;
        scale *= zoomFactor;
        if (scale < minScale) scale = minScale;
        if (scale > maxScale) scale = maxScale;
        zoomTarget.style.transform = `scale(${scale})`;
        initialDistance = newDistance;
        event.preventDefault();
      }
    });

    /* =============================
       ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ ã®ãƒ­ã‚¸ãƒƒã‚¯
       ============================= */
    // â–¼ 69ç¨®é¡ã®æ¤ç‰©ãƒ‡ãƒ¼ã‚¿
    const plants = [
      { file: "aburanna.png", classification: "ã‚¢ãƒ–ãƒ©ãƒŠç§‘", name: "ã‚¢ãƒ–ãƒ©ãƒŠ" },
      { file: "inugarashi.png", classification: "ã‚¢ãƒ–ãƒ©ãƒŠç§‘", name: "ã‚¤ãƒŒã‚¬ãƒ©ã‚·" },
      { file: "kabu.png", classification: "ã‚¢ãƒ–ãƒ©ãƒŠç§‘", name: "ã‚«ãƒ–" },
      { file: "kyabetu.png", classification: "ã‚¢ãƒ–ãƒ©ãƒŠç§‘", name: "ã‚­ãƒ£ãƒ™ãƒ„" },
      { file: "daikon.png", classification: "ã‚¢ãƒ–ãƒ©ãƒŠç§‘", name: "ãƒ€ã‚¤ã‚³ãƒ³" },
      { file: "nazuna.png", classification: "ã‚¢ãƒ–ãƒ©ãƒŠç§‘", name: "ãƒŠã‚ºãƒŠ" },
      { file: "wasabi.png", classification: "ã‚¢ãƒ–ãƒ©ãƒŠç§‘", name: "ãƒ¯ã‚µãƒ“" },
      { file: "ine.png", classification: "ã‚¤ãƒç§‘", name: "ã‚¤ãƒ" },
      { file: "enokorogusa.png", classification: "ã‚¤ãƒç§‘", name: "ã‚¨ãƒã‚³ãƒ­ã‚°ã‚µ" },
      { file: "ohisiba.png", classification: "ã‚¤ãƒç§‘", name: "ã‚ªãƒ’ã‚·ãƒ" },
      { file: "komugi.png", classification: "ã‚¤ãƒç§‘", name: "ã‚³ãƒ ã‚®" },
      { file: "sasa.png", classification: "ã‚¤ãƒç§‘", name: "ã‚µã‚µ" },
      { file: "susuki.png", classification: "ã‚¤ãƒç§‘", name: "ã‚¹ã‚¹ã‚­" },
      { file: "suzumenokatabira.png", classification: "ã‚¤ãƒç§‘", name: "ã‚¹ã‚ºãƒ¡ãƒã‚«ã‚¿ãƒ“ãƒ©" },
      { file: "suzumenoteppou.png", classification: "ã‚¤ãƒç§‘", name: "ã‚¹ã‚ºãƒ¡ãƒãƒ†ãƒƒãƒã‚¦" },
      { file: "take.png", classification: "ã‚¤ãƒç§‘", name: "ã‚¿ã‚±" },
      { file: "toumorokoshi.png", classification: "ã‚¤ãƒç§‘", name: "ãƒˆã‚¦ãƒ¢ãƒ­ã‚³ã‚·" },
      { file: "mehisiba.png", classification: "ã‚¤ãƒç§‘", name: "ãƒ¡ãƒ’ã‚·ãƒ" },
      { file: "amatyazuru.png", classification: "ã‚¦ãƒªç§‘", name: "ã‚¢ãƒãƒãƒ£ãƒ…ãƒ«" },
      { file: "kabotya.png", classification: "ã‚¦ãƒªç§‘", name: "ã‚«ãƒœãƒãƒ£" },
      { file: "karasuuri.png", classification: "ã‚¦ãƒªç§‘", name: "ã‚«ãƒ©ã‚¹ã‚¦ãƒª" },
      { file: "kyuuri.png", classification: "ã‚¦ãƒªç§‘", name: "ã‚­ãƒ¥ã‚¦ãƒª" },
      { file: "suika.png", classification: "ã‚¦ãƒªç§‘", name: "ã‚¹ã‚¤ã‚«" },
      { file: "hetima.png", classification: "ã‚¦ãƒªç§‘", name: "ãƒ˜ãƒãƒ" },
      { file: "yuugao.png", classification: "ã‚¦ãƒªç§‘", name: "ãƒ¦ã‚¦ã‚¬ã‚ª" },
      { file: "onamomi.png", classification: "ã‚­ã‚¯ç§‘", name: "ã‚ªãƒŠãƒ¢ãƒŸ" },
      { file: "kiku.png", classification: "ã‚­ã‚¯ç§‘", name: "ã‚­ã‚¯" },
      { file: "kosumosu.png", classification: "ã‚­ã‚¯ç§‘", name: "ã‚³ã‚¹ãƒ¢ã‚¹" },
      { file: "seitakaawadatisou.png", classification: "ã‚­ã‚¯ç§‘", name: "ã‚»ã‚¤ã‚¿ã‚«ã‚¢ãƒ¯ãƒ€ãƒã‚½ã‚¦" },
      { file: "senndanngusa.png", classification: "ã‚­ã‚¯ç§‘", name: "ã‚»ãƒ³ãƒ€ãƒ³ã‚°ã‚µ" },
      { file: "daria.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒ€ãƒªã‚¢" },
      { file: "tannpopo.png", classification: "ã‚­ã‚¯ç§‘", name: "ã‚¿ãƒ³ãƒãƒ" },
      { file: "noazami.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒã‚¢ã‚¶ãƒŸ" },
      { file: "nogeshi.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒã‚²ã‚·" },
      { file: "haruzion.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒãƒ«ã‚¸ã‚ªãƒ³" },
      { file: "himawari.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒ’ãƒãƒ¯ãƒª" },
      { file: "himezyoon.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒ’ãƒ¡ã‚¸ãƒ§ã‚ªãƒ³" },
      { file: "hyakunitisou.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒ’ãƒ£ã‚¯ãƒ‹ãƒã‚½ã‚¦" },
      { file: "ma-garetto.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒãƒ¼ã‚¬ãƒ¬ãƒƒãƒˆ" },
      { file: "mari-go-rudo.png", classification: "ã‚­ã‚¯ç§‘", name: "ãƒãƒªãƒ¼ã‚´ãƒ¼ãƒ«ãƒ‰" },
      { file: "asagao.png", classification: "ãã®ä»–", name: "ã‚¢ã‚µã‚¬ã‚ª" },
      { file: "ayame.png", classification: "ãã®ä»–", name: "ã‚¢ãƒ¤ãƒ¡" },
      { file: "oobako.png", classification: "ãã®ä»–", name: "ã‚ªã‚ªãƒã‚³" },
      { file: "osiroibana.png", classification: "ãã®ä»–", name: "ã‚ªã‚·ãƒ­ã‚¤ãƒãƒŠ" },
      { file: "katabami.png", classification: "ãã®ä»–", name: "ã‚«ã‚¿ãƒãƒŸ" },
      { file: "guraziorasu.png", classification: "ãã®ä»–", name: "ã‚°ãƒ©ã‚¸ã‚ªãƒ©ã‚¹" },
      { file: "sakura.png", classification: "ãã®ä»–", name: "ã‚µã‚¯ãƒ©" },
      { file: "zyagaimo.png", classification: "ãã®ä»–", name: "ã‚¸ãƒ£ã‚¬ã‚¤ãƒ¢" },
      { file: "suisen.png", classification: "ãã®ä»–", name: "ã‚¹ã‚¤ã‚»ãƒ³" },
      { file: "tutuzi.png", classification: "ãã®ä»–", name: "ãƒ„ãƒ„ã‚¸" },
      { file: "tubaki.png", classification: "ãã®ä»–", name: "ãƒ„ãƒã‚­" },
      { file: "tuyukusa.png", classification: "ãã®ä»–", name: "ãƒ„ãƒ¦ã‚¯ã‚µ" },
      { file: "higannbana.png", classification: "ãã®ä»–", name: "ãƒ’ã‚¬ãƒ³ãƒãƒŠ" },
      { file: "hiyasinnsu.png", classification: "ãã®ä»–", name: "ãƒ’ãƒ¤ã‚·ãƒ³ã‚¹" },
      { file: "housennka.png", classification: "ãã®ä»–", name: "ãƒ›ã‚¦ã‚»ãƒ³ã‚«" },
      { file: "yadorigi.png", classification: "ãã®ä»–", name: "ãƒ¤ãƒ‰ãƒªã‚®" },
      { file: "yamabuki.png", classification: "ãã®ä»–", name: "ãƒ¤ãƒãƒ–ã‚­" },
      { file: "yuri.png", classification: "ãã®ä»–", name: "ãƒ¦ãƒª" },
      { file: "inngennmame.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚¤ãƒ³ã‚²ãƒ³ãƒãƒ¡" },
      { file: "enndou.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚¨ãƒ³ãƒ‰ã‚¦" },
      { file: "ozigisou.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚ªã‚¸ã‚®ã‚½ã‚¦" },
      { file: "karasunoenndou.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚«ãƒ©ã‚¹ãƒã‚¨ãƒ³ãƒ‰ã‚¦" },
      { file: "kuzu.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚¯ã‚º" },
      { file: "gennge.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚²ãƒ³ã‚²" },
      { file: "sirotumegusa.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚·ãƒ­ãƒ„ãƒ¡ã‚°ã‚µ" },
      { file: "sui-topi.png", classification: "ãƒãƒ¡ç§‘", name: "ã‚¹ã‚¤ãƒ¼ãƒˆãƒ”ãƒ¼" },
      { file: "nemunoki.png", classification: "ãƒãƒ¡ç§‘", name: "ãƒãƒ ãƒã‚­" },
      { file: "hagi.png", classification: "ãƒãƒ¡ç§‘", name: "ãƒã‚®" },
      { file: "fuzi.png", classification: "ãƒãƒ¡ç§‘", name: "ãƒ•ã‚¸" }
    ];

    let currentPlant = null;
    let plantHP = 100;
    let playerHP = 100;

    const startScreen = document.getElementById('startScreen');
    const startButton = document.getElementById('startButton');
    const gameScreen = document.getElementById('gameScreen');
    const messageBox = document.getElementById('messageBox');
    const plantImage = document.getElementById('plantImage');
    const classificationButtons = document.querySelectorAll('.classification');
    const mouthButton = document.getElementById('mouthButton');
    const endScreen = document.getElementById('endScreen');
    const bgm = document.getElementById('bgm');
    const dqWinSound = document.getElementById("dqWinSound");
    const dqDownSound = document.getElementById("dqDownSound");
    const muteButton = document.getElementById("muteButton");
    const gameContainer = document.getElementById('gameContainer');

    // HPãƒãƒ¼è¦ç´ 
    const plantHPInner = document.getElementById('plantHPInner');
    const playerHPInner = document.getElementById('playerHPInner');

    // BGMåˆæœŸè¨­å®šï¼ˆåˆæœŸã¯ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ï¼‰
    bgm.muted = true;
    muteButton.textContent = 'éŸ³ ON';

 
    // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³
    startButton.addEventListener('click', startGame);

    // åˆ†é¡ãƒœã‚¿ãƒ³
    classificationButtons.forEach(button => {
      button.addEventListener('click', () => {
        const originalText = button.innerText;
        button.innerText = "â–¶" + originalText;
        setTimeout(() => { 
          button.innerText = originalText; 
        }, 200);
        handleAnswer(button.getAttribute('data-class'));
      });
    });

     // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰BGMãƒŸãƒ¥ãƒ¼ãƒˆè¨­å®šã‚’å–å¾—
    const isMuted = localStorage.getItem("bgmMuted") === "true";
    bgm.muted = isMuted;
    muteButton.textContent = isMuted ? "éŸ³ ON" : "éŸ³ OFF";


    // ãã¡ã¶ãˆãƒœã‚¿ãƒ³ï¼ˆéŸ³ã‚’æ­¢ã‚ã¦ãƒªãƒ­ãƒ¼ãƒ‰ï¼‰
    mouthButton.addEventListener("click", () => {
    dqWinSound.pause();
    dqWinSound.currentTime = 0;
    dqDownSound.pause();
    dqDownSound.currentTime = 0;
    location.reload();
  });

    // ãƒŸãƒ¥ãƒ¼ãƒˆãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã®å‡¦ç†
    muteButton.addEventListener('click', () => {
      if (bgm.muted) {
        bgm.muted = false;
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã«ã‚ˆã‚‹å†ç”Ÿé–‹å§‹ï¼ˆiOSå¯¾ç­–ï¼‰
        bgm.play().catch(error => console.error("BGMå†ç”Ÿã‚¨ãƒ©ãƒ¼:", error));
        muteButton.textContent = 'éŸ³ OFF';
      } else {
        bgm.muted = true;
        muteButton.textContent = 'éŸ³ ON';
      }
    });

    // ã‚²ãƒ¼ãƒ é–‹å§‹
    function startGame() {
      startScreen.style.display = 'none';
      gameScreen.style.display = 'block';
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§BGMå†ç”Ÿï¼ˆåˆå›å†ç”Ÿï¼‰
      bgm.play().catch(error => console.error("BGMå†ç”Ÿã‚¨ãƒ©ãƒ¼:", error));
      nextQuestion();
    }

    // æ¬¡ã®å•é¡Œã‚’å‡ºã™
    function nextQuestion() {
      messageBox.innerText = "";
      currentPlant = plants[Math.floor(Math.random() * plants.length)];
      // ç”»åƒã¯ index.html ã¨åŒéšå±¤ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹å‰æ
      plantImage.src = currentPlant.file;
      messageBox.innerText = "æ¤ç‰©ãŒã€€ã‚ã‚‰ã‚ã‚ŒãŸã€‚";
      setTimeout(() => {
        messageBox.innerText = "æ¤ç‰©ã¯ " + currentPlant.name + " ã‚’ã€€ãã‚Šã ã—ãŸã€‚";
      }, 400);
    }

    // ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã®å‡¦ç†
    function handleAnswer(selectedClass) {
      if (selectedClass === currentPlant.classification) {
        messageBox.innerText = currentPlant.name + " ã¯ã€€" + currentPlant.classification + " ã ";
        setTimeout(() => {
          messageBox.innerText = "æ­£è§£ï¼ æ¤ç‰©ã«20ã®ãƒ€ãƒ¡ãƒ¼ã‚¸";
          plantHP -= 20;
          updateHP();
          checkGameOver();
          if (plantHP > 0) {
            setTimeout(nextQuestion, 1000);
          }
        }, 1000);
      } else {
        // ä¸æ­£è§£ã®å ´åˆã€ç”»é¢ã«ã‚·ã‚§ã‚¤ã‚¯åŠ¹æœã‚’è¿½åŠ 
        gameContainer.classList.add('shake');
        // ã‚·ã‚§ã‚¤ã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã€ã‚¯ãƒ©ã‚¹ã‚’é™¤å»
        setTimeout(() => {
          gameContainer.classList.remove('shake');
        }, 500);

        messageBox.innerText = "ãƒŸã‚¹ï¼";
        setTimeout(() => {
          messageBox.innerText = currentPlant.name + " ã¯ã€€" + currentPlant.classification + " ã ";
          setTimeout(() => {
            messageBox.innerText = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«20ã®ãƒ€ãƒ¡ãƒ¼ã‚¸";
            playerHP -= 20;
            updateHP();
            checkGameOver();
            if (playerHP > 0) {
              setTimeout(nextQuestion, 1000);
            }
          }, 1000);
        }, 500);
      }
    }

    // HPãƒãƒ¼æ›´æ–°
    function updateHP() {
      plantHPInner.style.width = Math.max(0, plantHP) + "%";
      playerHPInner.style.width = Math.max(0, playerHP) + "%";
    }

      // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼åˆ¤å®šï¼ˆBGMã‚’æ­¢ã‚ã‚‹ & éŸ³ã‚’é³´ã‚‰ã™ï¼‰
    function checkGameOver() {
    if (plantHP <= 0 || playerHP <= 0) {
      bgm.pause(); // ğŸµ BGMã‚’æ­¢ã‚ã‚‹
      if (plantHP <= 0) {
        messageBox.innerText = "æ¤ç‰©ã¯ã€€ãŸãŠã‚ŒãŸã€‚";
        dqWinSound.play().catch(error => console.error("éŸ³ã®å†ç”Ÿã‚¨ãƒ©ãƒ¼:", error));
      } else {
        messageBox.innerText = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã€€ãŸãŠã‚ŒãŸã€‚";
        dqDownSound.play().catch(error => console.error("éŸ³ã®å†ç”Ÿã‚¨ãƒ©ãƒ¼:", error));
      }
      
      // ç”»é¢ã®ãƒœã‚¿ãƒ³ãƒ»ç”»åƒã‚’éš ã™
      plantImage.style.display = "none";
      classificationButtons.forEach(btn => btn.style.display = "none");
      document.getElementById('plantHP').style.display = "none";
      document.getElementById('playerHP').style.display = "none";
      endScreen.style.display = "block";

   
     
        
  });
      
      }
    }
  </script>
</body>
</html>
